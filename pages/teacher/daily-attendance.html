<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Daily Attendance</title>
  <link rel="stylesheet" href="../../css/styles.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    .attendance-table th, .attendance-table td {
      padding: 8px;
      text-align: center;
    }
    .status-btn {
      margin: 2px;
      padding: 4px 8px;
      cursor: pointer;
    }
    .present { background-color: #c6f6d5; }
    .absent { background-color: #feb2b2; }
    .hidden { display: none; }
  </style>
</head>
<body>
  <div id="home-icon-container"></div>
  <div class="container">
    <h1>Daily Attendance</h1>

    <form id="attendance-form">
      <label for="date">Select Date:</label>
      <input type="date" id="date" required><br><br>

      <label for="class">Select Class:</label>
      <select id="class" onchange="checkSelection()">
        <option value="">--Class--</option>
        <option value="8">8</option>
        <option value="9">9</option>
        <option value="10">10</option>
      </select>

      <label for="section">Select Section:</label>
      <select id="section" onchange="checkSelection()">
        <option value="">--Section--</option>
        <option value="A">A</option>
        <option value="B">B</option>
      </select>

      <label for="period">Select Period:</label>
      <select id="period">
        <option value="1">Period 1</option>
        <option value="2">Period 2</option>
        <option value="3">Period 3</option>
      </select>

      <label for="subject">Select Subject:</label>
      <select id="subject">
        <option value="Maths">Maths</option>
        <option value="Science">Science</option>
        <option value="Social">Social</option>
        <option value="English">English</option>
        <option value="Hindi">Hindi</option>
      </select>

      <br><br>
    </form>

    <div id="attendance-section" class="hidden">
      <table border="1" class="attendance-table">
        <thead>
          <tr>
            <th>Roll No</th>
            <th>Name</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody id="student-rows">
          <tr><td>1</td><td>Aryan Sharma</td><td>
            <button class="status-btn present" onclick="markAttendance(this, 'present')">Present</button>
            <button class="status-btn absent" onclick="markAttendance(this, 'absent')">Absent</button>
          </td></tr>
          <tr><td>2</td><td>Sneha Patel</td><td>
            <button class="status-btn present" onclick="markAttendance(this, 'present')">Present</button>
            <button class="status-btn absent" onclick="markAttendance(this, 'absent')">Absent</button>
          </td></tr>
          <tr><td>3</td><td>Rahul Verma</td><td>
            <button class="status-btn present" onclick="markAttendance(this, 'present')">Present</button>
            <button class="status-btn absent" onclick="markAttendance(this, 'absent')">Absent</button>
          </td></tr>
          <tr><td>4</td><td>Neha Reddy</td><td>
            <button class="status-btn present" onclick="markAttendance(this, 'present')">Present</button>
            <button class="status-btn absent" onclick="markAttendance(this, 'absent')">Absent</button>
          </td></tr>
          <tr><td>5</td><td>Kunal Deshmukh</td><td>
            <button class="status-btn present" onclick="markAttendance(this, 'present')">Present</button>
            <button class="status-btn absent" onclick="markAttendance(this, 'absent')">Absent</button>
          </td></tr>
        </tbody>
      </table>

      <br>
      <div>
        <strong>Total Present:</strong> <span id="total-present">0</span> &nbsp;
        <strong>Total Absent:</strong> <span id="total-absent">0</span>
      </div>
      <br>
<button onclick="window.location.href='attendance-menu.html'" style="padding: 8px 16px; font-size: 16px; background-color: #ddd; border: none; border-radius: 5px; cursor: pointer;">
  ‚Üê Back to Attendance Menu
</button>

    </div>
  </div>

  <script>
    function markAttendance(btn, status) {
      const row = btn.closest('tr');
      row.setAttribute('data-status', status);

      row.querySelectorAll('.status-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');

      updateTotals();
    }

    function updateTotals() {
      let present = 0, absent = 0;
      document.querySelectorAll('#student-rows tr').forEach(row => {
        const status = row.getAttribute('data-status');
        if (status === 'present') present++;
        else if (status === 'absent') absent++;
      });
      document.getElementById('total-present').textContent = present;
      document.getElementById('total-absent').textContent = absent;
    }

    function checkSelection() {
      const selectedClass = document.getElementById("class").value;
      const selectedSection = document.getElementById("section").value;
      const attendanceSection = document.getElementById("attendance-section");

      if (selectedClass && selectedSection) {
        attendanceSection.classList.remove("hidden");
      } else {
        attendanceSection.classList.add("hidden");
      }
    }

    fetch("../../components/home-icon.html")
      .then(res => res.text())
      .then(html => {
        document.getElementById("home-icon-container").innerHTML = html;
      });
  </script>
</body>
</html>